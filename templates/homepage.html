<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fórum de Suporte</title>
</head>
<body>
    <h1>Fórum de Suporte</h1>

    <h2>Menu</h2>

    <!-- Hyperlink para a página de adicionar nova pergunta -->
    <p><a href="{{ url_for('pergunta') }}">Nova Pergunta</a></p>

       <!-- Exibição das perguntas -->
    {% for pergunta in perguntas %}
        <div>
            <h3>{{ pergunta.titulo }}</h3>
            <p>{{ pergunta.conteudo }}</p>
            <p>Autor: {{ pergunta.autor.nome }} - Data: {{ pergunta.data_criacao }}</p>

            <!-- Formulário para adicionar resposta -->
            <form action="{{ url_for('adicionar_resposta', pergunta_id=pergunta.id) }}" method="POST">
                <textarea name="conteudo" placeholder="Digite sua resposta aqui..." required></textarea>
                <button type="submit">Responder</button>
            </form>

            <!-- Exibir respostas -->
            <h4>Respostas:</h4>
            {% for resposta in pergunta.respostas %}
                <div>
                    <p>{{ resposta.conteudo }}</p>
                    <p>Autor: {{ resposta.autor.nome }} - Data: {{ resposta.data_criacao }}</p>
                    <!-- Botão para excluir resposta -->
                    {% if resposta.autor_id == session['user_id'] %}
                        <form action="{{ url_for('excluir_resposta', resposta_id=resposta.id) }}" method="POST">
                            <button type="submit">Excluir Resposta</button>
                        </form>
                    {% endif %}
                </div>
            {% endfor %}

            <!-- Botão para excluir pergunta -->
            {% if pergunta.autor_id == session['user_id'] %}
                <form action="{{ url_for('excluir_pergunta', pergunta_id=pergunta.id) }}" method="POST">
                    <button type="submit">Excluir Pergunta</button>
                </form>
            {% endif %}
        </div>
        <hr>
    {% endfor %}
</body>


 <!-- Formulário para adicionar nova pergunta -->
    <h3>Adicionar Nova Pergunta</h3>
    <form action="{{ url_for('adicionar_pergunta') }}" method="POST">
        <input type="text" name="titulo" placeholder="Tema (Ex: Suporte E-mail)" required>
        <textarea name="conteudo" placeholder="Digite aqui o seu problema" required></textarea>
        <button type="submit">Adicionar Pergunta</button>
    </form>
</html>

